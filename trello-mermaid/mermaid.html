<!DOCTYPE html>
<html>
<head>
  <script src="https://p.trellocdn.com/power-up/1.0.0/trello-power-up.min.js"></script>
  <script src="https://unpkg.com/mermaid@8.11.2/dist/mermaid.min.js"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: auto;
    }
    .mermaid {
      margin: auto;
    }
  </style>
</head>
<body>
  <div class="mermaid"></div>
  <script>
    var t = TrelloPowerUp.iframe();

    t.render(function() {
      return t.get('card', 'shared', 'mermaid')
        .then(function(mermaidCode) {
          mermaid.initialize({ startOnLoad: true });
          document.querySelector('.mermaid').textContent = mermaidCode;
          mermaid.init(undefined, document.querySelectorAll('.mermaid'));
          t.sizeTo('.mermaid').done();
        });
    });
  </script>
</body>
</html>
